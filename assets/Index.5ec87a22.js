import{_ as Se,o as p,c as I,w as v,j as o,x as F,z as fe,g as T,Z as Ye,M as Ce,a as z,F as P,e as E,N as ae,$ as Qe,O as De,H,t as G,a0 as Xe,b as te,a1 as Ze,P as $e,p as ne,Q as Ee,l as Te,a2 as Fe,a3 as W,q as Ie,a4 as el,a5 as N,a6 as Re,a7 as le,a8 as U,a9 as Ne,aa as _e,ab as ll,ac as tl,ad as He,ae as xe,af as sl,ag as il,ah as al,ai as nl,aj as ol,ak as rl,al as ul,Y as be,am as dl,an as cl,ao as bl,ap as hl,aq as ml,ar as fl,u as Le,as as vl,at as ye,C as pl,B as ze,au as _l,av as je,aw as yl,ax as gl,ay as Vl,az as Oe,aA as Me,K as Ke,J as me,I as kl,aB as wl,aC as xl,m as Sl,r as ie,aD as Cl,n as he,f as ee,v as ge,E as Ue,aE as Tl,aF as Il,y as Ve}from"./index.67b1b5c7.js";import{L as Al}from"./Window.7fb38e50.js";import{S as Bl}from"./Screen.878b5a6d.js";import{V as J,m as Pl}from"./VTextField.e3fba086.js";import{V as Dl,a as Rl,b as Ll}from"./VSlideGroupItem.6ddc7c92.js";import{u as zl}from"./VInput.17b4cf3b.js";import{V as ke}from"./VSkeletonLoader.398683f6.js";import"./VSelectionControl.3a58b8be.js";const Ol={name:"SelectComponent",props:{modelValue:[String,Number,Array],label:String,icon:String,multiple:{type:Boolean,default:!1},items:{type:Array,default:()=>[]},itemValue:{type:String,default:"id"},itemTitle:{type:String,default:"value"},itemSubtitle:{type:String,default:null},display:{type:String,default:null}},emits:["update:modelValue"],data(){return{menu:!1,search:""}},computed:{filteredItems(){return this.search?this.items.filter(e=>String(e[this.itemTitle]).toLowerCase().includes(this.search.toLowerCase())):this.items},displayText(){if(this.display)return this.display;if(this.multiple&&Array.isArray(this.modelValue))return this.modelValue.map(e=>{const l=this.items.find(s=>s[this.itemValue]==e);return l?l[this.itemTitle]:""}).filter(Boolean).join(", ");{const e=this.items.find(l=>l[this.itemValue]===this.modelValue);return e?e[this.itemTitle]:""}}},methods:{select(e){console.log("Selected item:",e,this.multiple),this.multiple?this.$emit("update:modelValue",[+e[this.itemValue]]):this.$emit("update:modelValue",e[this.itemValue]),this.menu=!1,this.search=""},selectCheck(e){const l=Array.isArray(this.modelValue)?this.modelValue:[],s=+e[this.itemValue],n=l.indexOf(s);n>-1?l.splice(n,1):l.push(s),this.$emit("update:modelValue",l)},clear(){this.$emit("update:modelValue",null)},active(e){return this.multiple?Array.isArray(this.modelValue)&&(this.modelValue.includes(e[this.itemValue])||this.modelValue.includes(+e[this.itemValue])):e[this.itemValue]==this.modelValue}}},Ml={class:"pa-2 border-b"};function Ul(e,l,s,n,i,t){return p(),I($e,{modelValue:i.menu,"onUpdate:modelValue":l[3]||(l[3]=h=>i.menu=h),"close-on-content-click":!1,offset:0},{activator:v(({props:h})=>[o(J,F(h,{modelValue:t.displayText,"onUpdate:modelValue":l[0]||(l[0]=c=>t.displayText=c),label:s.label,"prepend-inner-icon":s.icon,density:"compact",variant:"outlined",readonly:"","onClick:clear":t.clear,"hide-details":""}),null,16,["modelValue","label","prepend-inner-icon","onClick:clear"])]),default:v(()=>[o(fe,null,{default:v(()=>[T("div",Ml,[o(J,{modelValue:i.search,"onUpdate:modelValue":l[1]||(l[1]=h=>i.search=h),density:"compact",placeholder:"Buscar...","prepend-inner-icon":"mdi-magnify",variant:"outlined","hide-details":"",autofocus:"",onKeydown:l[2]||(l[2]=Ye(h=>t.filteredItems.length>0&&t.select(t.filteredItems[0]),["enter"]))},null,8,["modelValue"])]),o(Ce,{"max-height":"300",class:"overflow-y-auto"},{default:v(()=>[(p(!0),z(P,null,E(t.filteredItems,h=>(p(),I(ae,{key:h[s.itemValue],onClick:c=>t.select(h),active:t.active(h)},Qe({default:v(()=>[o(De,null,{default:v(()=>[H(G(h[s.itemTitle]),1)]),_:2},1024),s.itemSubtitle?(p(),I(Xe,{key:0},{default:v(()=>[H(G(h[s.itemSubtitle]),1)]),_:2},1024)):te("",!0)]),_:2},[s.multiple?{name:"prepend",fn:v(()=>[o(Dl,{onClick:Ze(c=>t.selectCheck(h),["stop"]),"model-value":t.active(h),"hide-details":""},null,8,["onClick","model-value"])]),key:"0"}:void 0]),1032,["onClick","active"]))),128)),t.filteredItems.length?te("",!0):(p(),I(ae,{key:0},{default:v(()=>[o(De,{class:"text-medium-emphasis"},{default:v(()=>l[4]||(l[4]=[H(" Nenhum resultado encontrado ")])),_:1})]),_:1}))]),_:1})]),_:1})]),_:1},8,["modelValue"])}const $l=Se(Ol,[["render",Ul]]);const El=ne({renderless:Boolean,...Ee()},"VVirtualScrollItem"),Fl=Te()({name:"VVirtualScrollItem",inheritAttrs:!1,props:El(),emits:{"update:height":e=>!0},setup(e,l){let{attrs:s,emit:n,slots:i}=l;const{resizeRef:t,contentRect:h}=Fe(void 0,"border");W(()=>{var c;return(c=h.value)==null?void 0:c.height},c=>{c!=null&&n("update:height",c)}),Ie(()=>{var c,d;return e.renderless?o(P,null,[(c=i.default)==null?void 0:c.call(i,{itemRef:t})]):o("div",F({ref:t,class:["v-virtual-scroll__item",e.class],style:e.style},s),[(d=i.default)==null?void 0:d.call(i)])})}}),Nl=-1,Hl=1,we=100,jl=ne({itemHeight:{type:[Number,String],default:null},height:[Number,String]},"virtual");function Kl(e,l){const s=el(),n=N(0);Re(()=>{n.value=parseFloat(e.itemHeight||0)});const i=N(0),t=N(Math.ceil((parseInt(e.height)||s.height.value)/(n.value||16))||1),h=N(0),c=N(0),d=le(),_=le();let m=0;const{resizeRef:D,contentRect:u}=Fe();Re(()=>{D.value=d.value});const b=U(()=>{var a;return d.value===document.documentElement?s.height.value:((a=u.value)==null?void 0:a.height)||parseInt(e.height)||0}),g=U(()=>!!(d.value&&_.value&&b.value&&n.value));let x=Array.from({length:l.value.length}),w=Array.from({length:l.value.length});const A=N(0);let R=-1;function j(a){return x[a]||n.value}const O=tl(()=>{const a=performance.now();w[0]=0;const f=l.value.length;for(let S=1;S<=f-1;S++)w[S]=(w[S-1]||0)+j(S-1);A.value=Math.max(A.value,performance.now()-a)},A),oe=W(g,a=>{!a||(oe(),m=_.value.offsetTop,O.immediate(),$(),~R&&He(()=>{xe&&window.requestAnimationFrame(()=>{ce(R),R=-1})}))});Ne(()=>{O.clear()});function ve(a,f){const S=x[a],C=n.value;n.value=C?Math.min(n.value,f):f,(S!==f||C!==n.value)&&(x[a]=f,O())}function L(a){return a=_e(a,0,l.value.length-1),w[a]||0}function re(a){return ql(w,a)}let Y=0,K=0,se=0;W(b,(a,f)=>{f&&($(),a<f&&requestAnimationFrame(()=>{K=0,$()}))});let Q=-1;function X(){if(!d.value||!_.value)return;const a=d.value.scrollTop,f=performance.now();f-se>500?(K=Math.sign(a-Y),m=_.value.offsetTop):K=a-Y,Y=a,se=f,window.clearTimeout(Q),Q=window.setTimeout(ue,500),$()}function ue(){!d.value||!_.value||(K=0,se=0,window.clearTimeout(Q),$())}let de=-1;function $(){cancelAnimationFrame(de),de=requestAnimationFrame(pe)}function pe(){if(!d.value||!b.value)return;const a=Y-m,f=Math.sign(K),S=Math.max(0,a-we),C=_e(re(S),0,l.value.length),y=a+b.value+we,V=_e(re(y)+1,C+1,l.value.length);if((f!==Nl||C<i.value)&&(f!==Hl||V>t.value)){const B=L(i.value)-L(C),M=L(V)-L(t.value);Math.max(B,M)>we?(i.value=C,t.value=V):(C<=0&&(i.value=C),V>=l.value.length&&(t.value=V))}h.value=L(i.value),c.value=L(l.value.length)-L(t.value)}function ce(a){const f=L(a);!d.value||a&&!f?R=a:d.value.scrollTop=f}const r=U(()=>l.value.slice(i.value,t.value).map((a,f)=>({raw:a,index:f+i.value,key:ll(a)&&"value"in a?a.value:f+i.value})));return W(l,()=>{x=Array.from({length:l.value.length}),w=Array.from({length:l.value.length}),O.immediate(),$()},{deep:!0}),{calculateVisibleItems:$,containerRef:d,markerRef:_,computedItems:r,paddingTop:h,paddingBottom:c,scrollToIndex:ce,handleScroll:X,handleScrollend:ue,handleItemResize:ve}}function ql(e,l){let s=e.length-1,n=0,i=0,t=null,h=-1;if(e[s]<l)return s;for(;n<=s;)if(i=n+s>>1,t=e[i],t>l)s=i-1;else if(t<l)h=i,n=i+1;else return t===l?i:n;return h}const Gl=ne({items:{type:Array,default:()=>[]},renderless:Boolean,...jl(),...Ee(),...sl()},"VVirtualScroll"),Wl=Te()({name:"VVirtualScroll",props:Gl(),setup(e,l){let{slots:s}=l;const n=il("VVirtualScroll"),{dimensionStyles:i}=al(e),{calculateVisibleItems:t,containerRef:h,markerRef:c,handleScroll:d,handleScrollend:_,handleItemResize:m,scrollToIndex:D,paddingTop:u,paddingBottom:b,computedItems:g}=Kl(e,nl(e,"items"));return ol(()=>e.renderless,()=>{function x(){var R,j;const A=(arguments.length>0&&arguments[0]!==void 0?arguments[0]:!1)?"addEventListener":"removeEventListener";h.value===document.documentElement?(document[A]("scroll",d,{passive:!0}),document[A]("scrollend",_)):((R=h.value)==null||R[A]("scroll",d,{passive:!0}),(j=h.value)==null||j[A]("scrollend",_))}rl(()=>{h.value=ul(n.vnode.el,!0),x(!0)}),Ne(x)}),Ie(()=>{const x=g.value.map(w=>o(Fl,{key:w.key,renderless:e.renderless,"onUpdate:height":A=>m(w.index,A)},{default:A=>{var R;return(R=s.default)==null?void 0:R.call(s,{item:w.raw,index:w.index,...A})}}));return e.renderless?o(P,null,[o("div",{ref:c,class:"v-virtual-scroll__spacer",style:{paddingTop:be(u.value)}},null),x,o("div",{class:"v-virtual-scroll__spacer",style:{paddingBottom:be(b.value)}},null)]):o("div",{ref:h,class:["v-virtual-scroll",e.class],onScrollPassive:d,onScrollend:_,style:[i.value,e.style]},[o("div",{ref:c,class:"v-virtual-scroll__container",style:{paddingTop:be(u.value),paddingBottom:be(b.value)}},[x])])}),{calculateVisibleItems:t,scrollToIndex:D}}});function Jl(e,l){const s=N(!1);let n;function i(c){cancelAnimationFrame(n),s.value=!0,n=requestAnimationFrame(()=>{n=requestAnimationFrame(()=>{s.value=!1})})}async function t(){await new Promise(c=>requestAnimationFrame(c)),await new Promise(c=>requestAnimationFrame(c)),await new Promise(c=>requestAnimationFrame(c)),await new Promise(c=>{if(s.value){const d=W(s,()=>{d(),c()})}else c()})}async function h(c){var m,D;if(c.key==="Tab"&&((m=l.value)==null||m.focus()),!["PageDown","PageUp","Home","End"].includes(c.key))return;const d=(D=e.value)==null?void 0:D.$el;if(!d)return;(c.key==="Home"||c.key==="End")&&d.scrollTo({top:c.key==="Home"?0:d.scrollHeight,behavior:"smooth"}),await t();const _=d.querySelectorAll(":scope > :not(.v-virtual-scroll__spacer)");if(c.key==="PageDown"||c.key==="Home"){const u=d.getBoundingClientRect().top;for(const b of _)if(b.getBoundingClientRect().top>=u){b.focus();break}}else{const u=d.getBoundingClientRect().bottom;for(const b of[..._].reverse())if(b.getBoundingClientRect().bottom<=u){b.focus();break}}}return{onScrollPassive:i,onKeydown:h}}const Yl=ne({chips:Boolean,closableChips:Boolean,closeText:{type:String,default:"$vuetify.close"},openText:{type:String,default:"$vuetify.open"},eager:Boolean,hideNoData:Boolean,hideSelected:Boolean,listProps:{type:Object},menu:Boolean,menuIcon:{type:dl,default:"$dropdown"},menuProps:{type:Object},multiple:Boolean,noDataText:{type:String,default:"$vuetify.noDataText"},openOnClear:Boolean,itemColor:String,...cl({itemChildren:!1})},"Select"),Ql=ne({...Yl(),...bl(Pl({modelValue:null,role:"combobox"}),["validationValue","dirty","appendInnerIcon"]),...hl({transition:{component:ml}})},"VSelect"),Xl=Te()({name:"VSelect",props:Ql(),emits:{"update:focused":e=>!0,"update:modelValue":e=>!0,"update:menu":e=>!0},setup(e,l){let{slots:s}=l;const{t:n}=fl(),i=le(),t=le(),h=le(),c=Le(e,"menu"),d=U({get:()=>c.value,set:r=>{var a;c.value&&!r&&((a=t.value)==null?void 0:a.\u03A8openChildren.size)||(c.value=r)}}),{items:_,transformIn:m,transformOut:D}=vl(e),u=Le(e,"modelValue",[],r=>m(r===null?[null]:Vl(r)),r=>{var f;const a=D(r);return e.multiple?a:(f=a[0])!=null?f:null}),b=U(()=>typeof e.counterValue=="function"?e.counterValue(u.value):typeof e.counterValue=="number"?e.counterValue:u.value.length),g=zl(e),x=U(()=>u.value.map(r=>r.value)),w=N(!1),A=U(()=>d.value?e.closeText:e.openText);let R="",j;const O=U(()=>e.hideSelected?_.value.filter(r=>!u.value.some(a=>(e.valueComparator||ye)(a,r))):_.value),oe=U(()=>e.hideNoData&&!O.value.length||g.isReadonly.value||g.isDisabled.value),ve=U(()=>{var r;return{...e.menuProps,activatorProps:{...((r=e.menuProps)==null?void 0:r.activatorProps)||{},"aria-haspopup":"listbox"}}}),L=le(),re=Jl(L,i);function Y(r){e.openOnClear&&(d.value=!0)}function K(){oe.value||(d.value=!d.value)}function se(r){Oe(r)&&Q(r)}function Q(r){var C,y;if(!r.key||g.isReadonly.value)return;["Enter"," ","ArrowDown","ArrowUp","Home","End"].includes(r.key)&&r.preventDefault(),["Enter","ArrowDown"," "].includes(r.key)&&(d.value=!0),["Escape","Tab"].includes(r.key)&&(d.value=!1),r.key==="Home"?(C=L.value)==null||C.focus("first"):r.key==="End"&&((y=L.value)==null||y.focus("last"));const a=1e3;if(!Oe(r))return;const f=performance.now();f-j>a&&(R=""),R+=r.key.toLowerCase(),j=f;const S=_.value.find(V=>V.title.toLowerCase().startsWith(R));if(S!==void 0){u.value=[S];const V=O.value.indexOf(S);xe&&window.requestAnimationFrame(()=>{var B;V>=0&&((B=h.value)==null||B.scrollToIndex(V))})}}function X(r){let a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;if(!r.props.disabled)if(e.multiple){const f=u.value.findIndex(C=>(e.valueComparator||ye)(C.value,r.value)),S=a==null?!~f:a;if(~f){const C=S?[...u.value,r]:[...u.value];C.splice(f,1),u.value=C}else S&&(u.value=[...u.value,r])}else{const f=a!==!1;u.value=f?[r]:[],He(()=>{d.value=!1})}}function ue(r){var a;(a=L.value)!=null&&a.$el.contains(r.relatedTarget)||(d.value=!1)}function de(){var r;e.eager&&((r=h.value)==null||r.calculateVisibleItems())}function $(){var r;w.value&&((r=i.value)==null||r.focus())}function pe(r){w.value=!0}function ce(r){if(r==null)u.value=[];else if(Me(i.value,":autofill")||Me(i.value,":-webkit-autofill")){const a=_.value.find(f=>f.title===r);a&&X(a)}else i.value&&(i.value.value="")}return W(d,()=>{if(!e.hideSelected&&d.value&&u.value.length){const r=O.value.findIndex(a=>u.value.some(f=>(e.valueComparator||ye)(f.value,a.value)));xe&&window.requestAnimationFrame(()=>{var a;r>=0&&((a=h.value)==null||a.scrollToIndex(r))})}}),W(()=>e.items,(r,a)=>{d.value||w.value&&!a.length&&r.length&&(d.value=!0)}),Ie(()=>{const r=!!(e.chips||s.chip),a=!!(!e.hideNoData||O.value.length||s["prepend-item"]||s["append-item"]||s["no-data"]),f=u.value.length>0,S=J.filterProps(e),C=f||!w.value&&e.label&&!e.persistentPlaceholder?void 0:e.placeholder;return o(J,F({ref:i},S,{modelValue:u.value.map(y=>y.props.value).join(", "),"onUpdate:modelValue":ce,focused:w.value,"onUpdate:focused":y=>w.value=y,validationValue:u.externalValue,counterValue:b.value,dirty:f,class:["v-select",{"v-select--active-menu":d.value,"v-select--chips":!!e.chips,[`v-select--${e.multiple?"multiple":"single"}`]:!0,"v-select--selected":u.value.length,"v-select--selection-slot":!!s.selection},e.class],style:e.style,inputmode:"none",placeholder:C,"onClick:clear":Y,"onMousedown:control":K,onBlur:ue,onKeydown:Q,"aria-label":n(A.value),title:n(A.value)}),{...s,default:()=>o(P,null,[o($e,F({ref:t,modelValue:d.value,"onUpdate:modelValue":y=>d.value=y,activator:"parent",contentClass:"v-select__content",disabled:oe.value,eager:e.eager,maxHeight:310,openOnClick:!1,closeOnContentClick:!1,transition:e.transition,onAfterEnter:de,onAfterLeave:$},ve.value),{default:()=>{var y;return[a&&o(Ce,F({ref:L,selected:x.value,selectStrategy:e.multiple?"independent":"single-independent",onMousedown:V=>V.preventDefault(),onKeydown:se,onFocusin:pe,tabindex:"-1","aria-live":"polite",color:(y=e.itemColor)!=null?y:e.color},re,e.listProps),{default:()=>{var V,B,M,Z;return[(V=s["prepend-item"])==null?void 0:V.call(s),!O.value.length&&!e.hideNoData&&((M=(B=s["no-data"])==null?void 0:B.call(s))!=null?M:o(ae,{key:"no-data",title:n(e.noDataText)},null)),o(Wl,{ref:h,renderless:!0,items:O.value},{default:q=>{var Be,Pe;let{item:k,index:qe,itemRef:Ge}=q;const Ae=F(k.props,{ref:Ge,key:k.value,onClick:()=>X(k,null)});return(Pe=(Be=s.item)==null?void 0:Be.call(s,{item:k,index:qe,props:Ae}))!=null?Pe:o(ae,F(Ae,{role:"option"}),{prepend:We=>{let{isSelected:Je}=We;return o(P,null,[e.multiple&&!e.hideSelected?o(Rl,{key:k.value,modelValue:Je,ripple:!1,tabindex:"-1"},null):void 0,k.props.prependAvatar&&o(pl,{image:k.props.prependAvatar},null),k.props.prependIcon&&o(ze,{icon:k.props.prependIcon},null)])}})}}),(Z=s["append-item"])==null?void 0:Z.call(s)]}})]}}),u.value.map((y,V)=>{function B(k){k.stopPropagation(),k.preventDefault(),X(y,!1)}const M={"onClick:close":B,onKeydown(k){k.key!=="Enter"&&k.key!==" "||(k.preventDefault(),k.stopPropagation(),B(k))},onMousedown(k){k.preventDefault(),k.stopPropagation()},modelValue:!0,"onUpdate:modelValue":void 0},Z=r?!!s.chip:!!s.selection,q=Z?_l(r?s.chip({item:y,index:V,props:M}):s.selection({item:y,index:V})):void 0;if(!(Z&&!q))return o("div",{key:y.value,class:"v-select__selection"},[r?s.chip?o(yl,{key:"chip-defaults",defaults:{VChip:{closable:e.closableChips,size:"small",text:y.title}}},{default:()=>[q]}):o(je,F({key:"chip",closable:e.closableChips,size:"small",text:y.title,disabled:y.props.disabled},M),null):q!=null?q:o("span",{class:"v-select__selection-text"},[y.title,e.multiple&&V<u.value.length-1&&o("span",{class:"v-select__selection-comma"},[H(",")])])])})]),"append-inner":function(){var M;for(var y=arguments.length,V=new Array(y),B=0;B<y;B++)V[B]=arguments[B];return o(P,null,[(M=s["append-inner"])==null?void 0:M.call(s,...V),e.menuIcon?o(ze,{class:"v-select__menu-icon",icon:e.menuIcon},null):void 0])}})}),gl({isFocused:w,menu:d,select:X},i)}}),Zl={name:"CustomizationToolsComponent",props:{module:Object,items:Array},data:()=>({fonts:[{label:"Arial",value:"Arial, sans-serif"},{label:"Helvetica",value:"Helvetica, sans-serif"},{label:"Times New Roman",value:"Times New Roman, serif"},{label:"Georgia",value:"Georgia, serif"},{label:"Courier New",value:"Courier New, monospace"},{label:"Verdana",value:"Verdana, sans-serif"},{label:"DIN Condensed",value:"din-bold, sans-serif"},{label:"Roboto",value:"Roboto, sans-serif"}]}),computed:{menu_items(){return this.items.map(e=>this.toBlock(e))},userdata(){return new Proxy({},{get:(e,l)=>this.$userdata.get(`modules.${this.module.id}.${l}`,null),set:(e,l,s)=>(this.$userdata.set(`modules.${this.module.id}.${l}`,s),!0)})}},methods:{t(e){return this.$t(`modules.${this.module.id}.${e}`)},toBlock(e){return typeof e=="string"?e={name:this.label(e),items:this.toArray(e)}:Array.isArray(e)&&(e={name:"",items:e}),e.items=this.toArray(e==null?void 0:e.items).map(l=>this.toArray(l).map(s=>({...this.properties(s),property:s,label:this.label(s)}))),e},toArray(e){return e==null?[]:typeof e=="string"?[e]:Array.isArray(e)?e:[]},label(e){var l,s,n;return this.t((n=(s=(l=this.module)==null?void 0:l.manifest)==null?void 0:s.customization[e])==null?void 0:n.label)},properties(e){var l,s;return(s=(l=this.module)==null?void 0:l.manifest)==null?void 0:s.customization[e]}}},et={class:"d-flex flex-column justify-center"};function lt(e,l,s,n,i,t){return p(),I(wl,{"show-arrows":"",class:"__customization_tools"},{default:v(()=>[(p(!0),z(P,null,E(t.menu_items,(h,c)=>(p(),I(Ll,{key:c},{default:v(()=>[o(fe,{class:"d-flex flex-column pt-2 px-1"},{default:v(()=>[o(Ke,{style:{flex:"1"},class:"d-flex pa-0 ma-0 px-1"},{default:v(()=>[(p(!0),z(P,null,E(h.items,(d,_)=>(p(),z(P,{key:_},[_>0?(p(),I(me,{key:0,vertical:"",class:"mx-1"})):te("",!0),T("div",et,[(p(!0),z(P,null,E(d,(m,D)=>(p(),z("div",{key:D,class:"my-1"},[(m==null?void 0:m.type)=="color"?(p(),I(J,{key:0,modelValue:t.userdata[m.property],"onUpdate:modelValue":u=>t.userdata[m.property]=u,label:m==null?void 0:m.label,width:100,type:"color","prepend-inner-icon":"mdi-palette",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","label"])):["font-size","border-spacing"].includes(m==null?void 0:m.type)?(p(),I(J,{key:1,modelValue:t.userdata[m.property],"onUpdate:modelValue":u=>t.userdata[m.property]=u,label:m==null?void 0:m.label,width:120,type:"number",min:1,max:90,"prepend-inner-icon":(m==null?void 0:m.type)=="font-size"?"mdi-format-font-size-increase":"mdi-border-all-variant",density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","label","prepend-inner-icon"])):(m==null?void 0:m.type)=="font"?(p(),I(Xl,{key:2,modelValue:t.userdata[m.property],"onUpdate:modelValue":u=>t.userdata[m.property]=u,label:m==null?void 0:m.label,width:200,"prepend-inner-icon":"mdi-format-font",density:"compact",variant:"outlined",items:e.fonts,"item-title":"label","item-value":"value","hide-details":""},null,8,["modelValue","onUpdate:modelValue","label","items"])):(p(),I(J,{key:3,modelValue:t.userdata[m.property],"onUpdate:modelValue":u=>t.userdata[m.property]=u,label:m==null?void 0:m.label,width:200,density:"compact",variant:"outlined","hide-details":""},null,8,["modelValue","onUpdate:modelValue","label"]))]))),128))])],64))),128))]),_:2},1024),o(kl,{class:"text-center"},{default:v(()=>[T("small",null,G(h.name),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:1})}const tt=Se(Zl,[["render",lt]]),st={name:"CollectionsModule",components:{LWindow:Al,Screen:Bl,LScreenBtn:xl,LSelect:$l,LCustomizationTools:tt},data:()=>({lang:null,loading:!1,loading_book:!1,loading_verses:!1,tab:null,width:0,height:0,bible:{id_bible_version:null,id_bible_book:null,version:null,book:null,chapter:null,verses:[]},select_bible:{id_bible_version:null,id_bible_book:null,version:null,book:null,chapter:null,verses:[],scriptural_reference:null,text:null},versions:[],books:[],verses:[],last_verse:1,last_bible_file:null}),computed:{module_id(){return Sl.id},module(){return this.$modules.get(this.module_id)},userdata(){return new Proxy({},{get:(e,l)=>this.$userdata.get(`modules.${this.module.id}.${l}`,null),set:(e,l,s)=>(this.$userdata.set(`modules.${this.module.id}.${l}`,s),!0)})},show(){return this.module.show},bible_verses:{get(){return Object.assign([],this.bible.verses)},set(e){if(e.length==0){this.clean();return}if(e.length==1)this.selVerse(null,e[0]);else{const l=e.filter(i=>!this.bible.verses.includes(i)),s=this.bible.verses.filter(i=>!e.includes(i)),n={ctrlKey:!0};l.length>0?this.selVerse(n,l[0]):s.length>0&&this.selVerse(n,s[0])}}},book(){return this.books.find(e=>e.id_bible_book==this.bible.id_bible_book)},version(){return this.versions.find(e=>e.id_bible_version==this.bible.id_bible_version)},chapters(){var e;return(e=this.book)==null?void 0:e.chapters},versions_list(){return this.versions.map(e=>({title:e.abbreviation+" - "+e.name,value:e.id_bible_version}))},compact:function(){return this.$vuetify.display.width<=750},super_compact:function(){return this.$vuetify.display.width<=400}},watch:{async show(){this.show&&this.lang!=this.$i18n.locale&&(this.versions=[],this.books=[],this.verses=[],this.bible={id_bible_version:null,id_bible_book:null,version:null,book:null,chapter:null,verses:[]},this.select_bible=Object.assign({},this.bible),await this.loadData())},async"bible.id_bible_book"(){await this.selBook()},async"bible.chapter"(){await this.selChapter()},async"bible.id_bible_version"(){await this.selVersion()},select_bible(){this.send("scriptural_reference",this.select_bible.scriptural_reference),this.send("text",this.select_bible.text)}},methods:{t(e){return this.$t(`modules.${this.module_id}.${e}`)},send(e,l){this.$appdata.set(`modules.${this.module_id}.data.${e}`,l)},async loadData(){this.loading=!0,this.books.length<=0&&(this.loading_book=!0,this.books=await this.$database.get(`${this.$i18n.locale}_bible_book`),this.bible.id_bible_book||await this.selBook(this.books[0].id_bible_book),this.loading_book=!1),this.versions.length<=0&&(this.versions=await this.$database.get(`${this.$i18n.locale}_bible_version`),this.bible.id_bible_version||await this.selVersion(this.versions[0].id_bible_version));const e=`bible_${this.bible.id_bible_version}_${this.bible.id_bible_book}_${this.bible.chapter}`;e!=this.last_bible_file&&(this.loading_verses=!0,this.verses={},this.verses=await this.$database.get(e),this.last_bible_file=e,this.loading_verses=!1),this.select_bible.id_bible_book==this.bible.id_bible_book&&this.select_bible.chapter==this.bible.chapter&&this.select_bible.id_bible_version==this.bible.id_bible_version&&(this.bible.verses=this.select_bible.verses),this.lang=this.$i18n.locale,this.loading=!1},resize(e){this.width=e.container_width,this.height=e.container_height},async selVersion(e){var l;e&&(this.bible.id_bible_version=e),this.bible.version=(l=this.version)==null?void 0:l.abbreviation,this.bible.verses=[],this.last_verse=1,await this.loadData()},async selBook(e){e&&(this.bible.id_bible_book=e),this.bible.book=this.book.name,this.bible.verses=[],this.last_verse=1,this.bible.chapter?this.bible.chapter>this.book.chapters?this.selChapter(this.book.chapters):await this.loadData():this.selChapter(1);const l=document.getElementById(`listBook_${e}`);l&&l.scrollIntoView({behavior:"smooth",block:"center"})},async selChapter(e){e&&(this.bible.chapter=e),this.bible.verses=[],this.last_verse=1,await this.loadData();const l=document.getElementById(`listChapter_${e}`);l&&l.scrollIntoView({behavior:"smooth",block:"center"})},async selVerse(e,l){if(e)try{e.preventDefault()}catch{}if(l=parseInt(l),isNaN(l))return;if(e!=null&&e.ctrlKey){const n=this.bible.verses.indexOf(l);n===-1?this.bible.verses.push(l):this.bible.verses.splice(n,1)}else if(e!=null&&e.shiftKey){const n=Math.min(l,this.last_verse),i=Math.max(l,this.last_verse);for(let t=n;t<=i;t++)this.bible.verses.includes(t)||this.bible.verses.push(t)}else{if(this.bible.verses.length==1&&this.bible.verses[0]==l){this.bible.verses.splice(0,1),this.clean();return}this.bible.verses=[l]}this.last_verse=l,this.bible.verses.sort((n,i)=>n-i),this.select_bible=Object.assign({},this.bible),this.select_bible.scriptural_reference=this.scripturalReference(this.select_bible),this.select_bible.text=this.getSelectedVerses(this.select_bible.verses);const s=document.getElementById(`listVerse_${this.last_verse}`);s&&s.scrollIntoView({behavior:"smooth",block:"center"})},lastSelectedVerse(e){this.selVerse(null,+e)},async prevVerse(){var e,l,s,n;if((e=this.select_bible)!=null&&e.id_bible_version&&await this.selVersion(this.select_bible.id_bible_version),(l=this.select_bible)!=null&&l.id_bible_book&&await this.selBook(this.select_bible.id_bible_book),(s=this.select_bible)!=null&&s.chapter&&await this.selChapter(this.select_bible.chapter),((n=this.select_bible)==null?void 0:n.verses)&&this.select_bible.verses.length>0){let i=Math.min(...this.select_bible.verses.filter(t=>t>0));if(i>1)i--;else if(this.select_bible.chapter>1)await this.selChapter(this.select_bible.chapter-1),i=Math.max(...Object.keys(this.verses).map(Number));else{let t=this.books.findIndex(c=>c.id_bible_book==this.bible.id_bible_book);const h=t>0?this.books[t-1]:this.books[this.books.length-1];await this.selBook(h.id_bible_book),await this.selChapter(h.chapters),i=Math.max(...Object.keys(this.verses).map(Number))}this.selVerse(null,i)}},async nextVerse(){var e,l,s,n;if((e=this.select_bible)!=null&&e.id_bible_version&&await this.selVersion(this.select_bible.id_bible_version),(l=this.select_bible)!=null&&l.id_bible_book&&await this.selBook(this.select_bible.id_bible_book),(s=this.select_bible)!=null&&s.chapter&&await this.selChapter(this.select_bible.chapter),((n=this.select_bible)==null?void 0:n.verses)&&this.select_bible.verses.length>0){let i=Math.max(...this.select_bible.verses);const t=Math.max(...Object.keys(this.verses).map(Number)),h=this.book.chapters;if(i<t)i++;else if(this.select_bible.chapter<h)await this.selChapter(this.select_bible.chapter+1),i=1;else{let c=this.books.findIndex(_=>_.id_bible_book==this.bible.id_bible_book);const d=c<this.books.length-1?this.books[c+1]:this.books[0];await this.selBook(d.id_bible_book),await this.selChapter(1),i=1}this.selVerse(null,i)}},chaptersList(){return this.chapters?Array.from({length:this.chapters},(e,l)=>({id:l+1,value:this.t("chapter")+" "+(l+1)})):[]},versesList(){return this!=null&&this.verses?Object.keys(this.verses).map(e=>({id:e,value:this.t("verse")+" "+e})):[]},numbersInterval(e){if(!e||e.length===0)return"";e.sort((i,t)=>i-t);let l=[],s=e[0],n=e[0];for(let i=1;i<=e.length;i++)e[i]===n+1||(s===n?l.push(`${s}`):l.push(`${s}-${n}`),s=e[i]),n=e[i];return l.join(", ")},scripturalReference(e){const l=this.numbersInterval(e.verses);return!e.book||!e.version?"":(e.book+" "+e.chapter+(l?`:${l}`:"")+(e.version?` (${e.version})`:"")).trim()},getSelectedVerses(e){e.sort((n,i)=>n-i);let l="",s=null;return e.forEach(n=>{s!==null&&n-s>1?l+=" [...] ":l&&(l+=" "),l+=this.verses[n],s=n}),l},clean:function(){this.bible.verses=[],this.select_bible={id_bible_version:null,id_bible_book:null,version:null,book:null,chapter:null,verses:[],scriptural_reference:null,text:null}},close(){this.$popup.exit(),this.bible.verses=[],this.select_bible={id_bible_version:null,id_bible_book:null,version:null,book:null,chapter:null,verses:[],scriptural_reference:null,text:null}},displayVerses(){return!this.bible.verses||this.bible.verses.length===0?this.t("verses_select"):`${this.t("verses")}: ${this.numbersInterval(this.bible.verses)}`}},async mounted(){await this.loadData()}},it={key:0},at={key:0,class:"d-flex flex-row h-100"},nt={class:"w-70 h-100 d-flex flex-column"},ot={style:{"flex-shrink":"0"},class:"ps-4 pe-1"},rt={class:"w-30 h-100 d-flex flex-column"},ut={style:{"flex-shrink":"0"},class:"px-1"},dt={class:"d-flex flex-row h-100"},ct={class:"ps-1 pe-4 pb-3",style:{"flex-shrink":"0"}},bt=["innerHTML"],ht={style:{height:"48px"}};function mt(e,l,s,n,i,t){const h=ie("l-customization-tools"),c=ie("LScreenBtn"),d=ie("l-select"),_=ie("Screen"),m=ie("l-window"),D=Cl("shortkey");return p(),I(m,{modelValue:t.module.show,"onUpdate:modelValue":l[13]||(l[13]=u=>t.module.show=u),title:t.scripturalReference(e.bible),icon:t.module.icon,closable:"",minimizable:"",compact:"",onClose:l[14]||(l[14]=u=>{t.close(),e.$modules.close(t.module_id)}),onMinimize:l[15]||(l[15]=u=>e.$modules.minimize(t.module_id)),onResize:t.resize,"slot-left-style":{width:t.compact?0:e.width/100*60+"px"},"slot-right-style":{width:t.compact?e.width:e.width/100*40+"px"},index:e.loading},{customize:v(()=>[o(h,{module:t.module,items:[{name:"Fundo",items:["background_color"]},{name:"Texto",items:[["font","font_size"],"font_color"]},{name:"Refer\xEAncia",items:[["reference_font","reference_font_size"],"reference_font_color"]},{name:"Janela",items:["border_spacing"]}]},null,8,["module"])]),system_buttons:v(()=>[o(c,{module:"bible"})]),header:v(()=>{var u,b;return[o(d,{modelValue:e.bible.id_bible_version,"onUpdate:modelValue":l[0]||(l[0]=g=>e.bible.id_bible_version=g),items:(u=t.versions_list)!=null?u:[],"item-value":"value","item-title":"title"},null,8,["modelValue","items"]),t.compact?(p(),z("div",it,[l[16]||(l[16]=T("div",{class:"my-1"},null,-1)),o(d,{modelValue:e.bible.id_bible_book,"onUpdate:modelValue":l[1]||(l[1]=g=>e.bible.id_bible_book=g),items:(b=e.books)!=null?b:[],"item-value":"id_bible_book","item-title":"name","item-subtitle":"abbreviation",icon:"mdi-book-open-page-variant"},null,8,["modelValue","items"]),l[17]||(l[17]=T("div",{class:"my-1"},null,-1)),o(d,{modelValue:e.bible.chapter,"onUpdate:modelValue":l[2]||(l[2]=g=>e.bible.chapter=g),items:t.chaptersList(),"item-value":"id","item-title":"value",icon:"mdi-bookmark"},null,8,["modelValue","items"]),l[18]||(l[18]=T("div",{class:"my-1"},null,-1)),o(d,{modelValue:t.bible_verses,"onUpdate:modelValue":l[3]||(l[3]=g=>t.bible_verses=g),items:t.versesList(),"item-value":"id","item-title":"value",multiple:"",icon:"mdi-format-list-numbered",display:t.displayVerses()},null,8,["modelValue","items","display"])])):te("",!0)]}),left:v(()=>{var u;return[t.compact?te("",!0):(p(),z("div",at,[T("div",nt,[T("div",ot,[o(d,{modelValue:e.bible.id_bible_book,"onUpdate:modelValue":l[4]||(l[4]=b=>e.bible.id_bible_book=b),items:(u=e.books)!=null?u:[],"item-value":"id_bible_book","item-title":"name","item-subtitle":"abbreviation",icon:"mdi-book-open-page-variant"},null,8,["modelValue","items"])]),T("div",{style:he(`height: ${e.height-65}px`),class:"overflow-auto d-flex flex-row flex-wrap justify-center align-content-start px-2 mt-2"},[(p(),z(P,null,E(10,b=>ee(o(ke,{key:b,class:"ma-1",height:80,width:100}),[[ge,e.loading_book]])),64)),(p(!0),z(P,null,E(e.books,b=>(p(),I(fe,{key:b.id_bible_book,color:b.color,class:"ma-1 d-flex align-center flex-column",height:80,width:100,hover:"",variant:b.id_bible_book==e.bible.id_bible_book?"flat":"tonal",onClick:g=>t.selBook(b.id_bible_book),id:`listBook_${b.id_bible_book}`},{default:v(()=>[o(Ue,{class:"flex-grow-1 pa-0 ma-0 text-h4 d-flex align-center"},{default:v(()=>[H(G(b.abbreviation),1)]),_:2},1024),o(Ke,{class:"flex-grow-0 pa-0 px-1 ma-0 text-caption text-truncate text-center w-100"},{default:v(()=>[H(G(b.name),1)]),_:2},1024)]),_:2},1032,["color","variant","onClick","id"]))),128))],4)]),T("div",rt,[T("div",ut,[o(d,{modelValue:e.bible.chapter,"onUpdate:modelValue":l[5]||(l[5]=b=>e.bible.chapter=b),items:t.chaptersList(),"item-value":"id","item-title":"value",icon:"mdi-bookmark"},null,8,["modelValue","items"])]),T("div",{style:he(`height: ${e.height-65}px`),class:"overflow-auto d-flex flex-row flex-wrap justify-center align-content-start px-2 mt-2"},[(p(),z(P,null,E(10,b=>ee(o(ke,{key:b,class:"ma-1",height:40,width:40}),[[ge,e.loading_book]])),64)),(p(!0),z(P,null,E(t.chapters,b=>{var g;return p(),I(fe,{key:b,color:(g=t.book)==null?void 0:g.color,class:"ma-1 d-flex align-center flex-column",height:40,width:40,hover:"",variant:b==e.bible.chapter?"flat":"tonal",onClick:x=>t.selChapter(b),id:`listChapter_${b}`},{default:v(()=>[o(Ue,{class:"flex-grow-1 pa-0 ma-0 d-flex align-center font-weight-regular",style:{"font-size":"16px"}},{default:v(()=>[H(G(b),1)]),_:2},1024)]),_:2},1032,["color","variant","onClick","id"])}),128))],4)])]))]}),right:v(()=>[T("div",dt,[T("div",{style:he({height:e.height+"px",width:(t.compact?e.width:e.width/100*40)+"px"})},[T("div",ct,[t.compact?te("",!0):(p(),I(d,{key:0,modelValue:t.bible_verses,"onUpdate:modelValue":l[6]||(l[6]=u=>t.bible_verses=u),items:t.versesList(),"item-value":"id","item-title":"value",multiple:"",icon:"mdi-format-list-numbered",display:t.displayVerses()},null,8,["modelValue","items","display"]))]),T("div",{style:he(`height: ${e.height/2-30}px;`),class:"mt-2"},[ee(o(ke,{type:"list-item-two-line"},null,512),[[ge,e.loading_book||e.loading_verses]]),o(Ce,{class:"overflow h-100 ma-0 pa-0 no-select",width:"100%"},{default:v(()=>[(p(!0),z(P,null,E(e.verses,(u,b)=>(p(),I(ae,{key:b,link:"",variant:"flat",value:u,active:e.bible.verses.includes(+b),onClick:g=>t.selVerse(g,b),density:"compact",id:`listVerse_${b}`},{prepend:v(()=>[o(je,{class:"mr-2"},{default:v(()=>[H(G(b),1)]),_:2},1024)]),default:v(()=>[T("div",{innerHTML:u,class:"text-caption"},null,8,bt)]),_:2},1032,["value","active","onClick","id"]))),128))]),_:1})],4),T("div",ht,[o(Tl,{density:"compact"},{default:v(()=>{var u,b,g;return[o(Il),o(me,{vertical:""}),ee(o(Ve,{disabled:!(((u=e.select_bible)==null?void 0:u.verses)&&e.select_bible.verses.length>0),variant:"text",size:"small",icon:"mdi-chevron-left ",onClick:l[7]||(l[7]=x=>t.prevVerse()),onShortkey:l[8]||(l[8]=x=>t.prevVerse())},null,8,["disabled"]),[[D,["arrowleft"]]]),ee(o(Ve,{disabled:!(((b=e.select_bible)==null?void 0:b.verses)&&e.select_bible.verses.length>0),variant:"text",size:"small",icon:"mdi-chevron-right ",onClick:l[9]||(l[9]=x=>t.nextVerse()),onShortkey:l[10]||(l[10]=x=>t.nextVerse())},null,8,["disabled"]),[[D,["arrowright"]]]),o(me,{vertical:""}),ee(o(Ve,{disabled:!(((g=e.select_bible)==null?void 0:g.verses)&&e.select_bible.verses.length>0),variant:"text",size:"small",icon:"mdi-eraser",onClick:l[11]||(l[11]=x=>t.clean()),onShortkey:l[12]||(l[12]=x=>t.clean())},null,8,["disabled"]),[[D,["del"]]]),o(me,{vertical:""}),o(c,{module:"bible"})]}),_:1})]),o(_,{height:t.compact?e.height/2-48:e.height/2-88},null,8,["height"])],4)])]),_:1},8,["modelValue","title","icon","onResize","slot-left-style","slot-right-style","index"])}const wt=Se(st,[["render",mt]]);export{wt as default};
